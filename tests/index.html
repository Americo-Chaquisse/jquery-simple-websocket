<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Simple WebSocket Chat</title>
</head>
<body>
<h1>Simple WebSocket Chat</h1>
<pre id="content" style="height:200px; overflow: auto;"></pre>
<input id="message" type="text"/>
<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.0.js"></script>
<script src="https://raw.githubusercontent.com/Krinkle/jquery-json/v2.5.1/dist/jquery.json.min.js"></script>
<script src="../jquery.simplesocket.js"></script>
<script>
    var webSocket = $.simpleSocket({ url: 'ws://127.0.0.1:3000/' });

    webSocket.connect();

    webSocket.listen(function(message) {
        console.log(message);
        $('#content').prepend(message.text+'\n');
    }).fail(function(e) {
        // your error handling e. g.
        console.log(e);
    });

    webSocket.send({ 'text': 'echo' }).fail(function(e) {
        // your error handling e. g.
        console.log(e);
    });

    $('#message').change(function() {
        webSocket.send({ 'text': this.value }).fail(function(e) {
            // your error handling e. g.
            console.log(e);
        });
        this.value = '';
    });

    $('#message').focus();
</script>
</body>
</html>